%% Get the coil modelling data
% Consider adding the following or equivalent to .bashrc:
% export JULIA_PKG_DEVDIR=$HOME/projects/IRAD-1340-API/FXP-RDM
if isenv("JULIA_PKG_DEVDIR")
    PROJECT_DIR = getenv(JULIA_PKG_DEVDIR)
else
    PROJECT_DIR = pwd
end

load([PROJECT_DIR '/ss_iter.mat'])
mxx = [tok_data_struct.mcc];
rxx = diag([tok_data_struct.resc]);

% Maa = iter_system.Pcc'*(mxx)*iter_system.Pcc;
% Ra = iter_system.Pcc'*(rxx)*iter_system.Pcc;

Maa = [0.7635    0.2320    0.0658    0.0074    0.0039    0.1363    0.0434    0.0473    0.0270    0.0150    0.0108   -0.0017
    0.2320    0.7635    0.2811    0.0167    0.0074    0.0602    0.0357    0.0496    0.0340    0.0218    0.0175   -0.0011
    0.0658    0.2811    1.9909    0.2811    0.0658    0.0417    0.0433    0.0883    0.0854    0.0790    0.0888    0.0009
    0.0074    0.0167    0.2811    0.7635    0.2320    0.0080    0.0119    0.0335    0.0450    0.0651    0.1208    0.0013
    0.0039    0.0074    0.0658    0.2320    0.7635    0.0049    0.0081    0.0262    0.0410    0.0800    0.2495    0.0011
    0.1363    0.0602    0.0417    0.0080    0.0049    0.7104    0.1132    0.1008    0.0492    0.0243    0.0160   -0.0031
    0.0434    0.0357    0.0433    0.0119    0.0081    0.1132    0.4748    0.2393    0.1027    0.0471    0.0293   -0.0027
    0.0473    0.0496    0.0883    0.0335    0.0262    0.1008    0.2393    1.8639    0.4553    0.1838    0.1063    0.0006
    0.0270    0.0340    0.0854    0.0450    0.0410    0.0492    0.1027    0.4553    1.5668    0.3607    0.1891    0.0053
    0.0150    0.0218    0.0790    0.0651    0.0800    0.0243    0.0471    0.1838    0.3607    1.5648    0.4910    0.0059
    0.0108    0.0175    0.0888    0.1208    0.2495    0.0160    0.0293    0.1063    0.1891    0.4910    2.3979    0.0042
   -0.0017   -0.0011    0.0009    0.0013    0.0011   -0.0031   -0.0027    0.0006    0.0053    0.0059    0.0042    0.0012];


Ra = [0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0         0
         0         0         0         0         0         0         0         0         0         0         0    0.0014];

%% Info

Kp_IPF = [2 2 2 2 2 2 2 2 2 2 2 2];
Kd_IPF = [0 0 0 0 0 0 0 0 0 0 0 0];
Ki_IPF = [0 0 0 0 0 0 0 0 0 0 0 0];
T_IPF = diag([1 1 1 1 1 1 1 1 1 1 1 0].');
